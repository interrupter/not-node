<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Global Members &lt;constant&gt; EventEmitter Not an App, But can be used for hosting modules and models. Methods checkAdmin(req, res, next) Checks if user is authenticated, by searching req.session.user If auth pass next, else throw error Parameters: Name Type Description req object Express Request object res object Express Repost object next function callback checkCredentials(rule, auth, role, admin) Check rule against presented credentials Parameters: Name Type Description rule object action rule { auth - if user should be authenticated role - if user shoud have some role admin - if user should be super user } auth Boolean user state of auth role String | Array user state of role admin Boolean user state of admin Returns: pass or not Type boolean checkRoleBuilder(role) Returns Express middleware witch check role against one presented in request Parameters: Name Type Description role string | array action roles Returns: express middleware Type function checkSupremacy(base, against, roles) Check to sets of roles against each other to define if base is strictly higher than second Parameters: Name Type Description base String | Array first set of roles against String | Array second set of roles roles Array roles in order of supremacy from highest to lowest Returns: true if base &gt; against Type boolean checkUser(req, res, next) Checks if user is authenticated, by searching req.session.user If auth pass next, else throw error Parameters: Name Type Description req object Express Request object res object Express Repost object next function callback cleanse(req) Reset session Parameters: Name Type Description req object Express Request compareRoles(userRoles, actionRoles, strict) Compares two list of roles Parameters: Name Type Default Description userRoles array | string roles of user actionRoles array | string roles of action strict boolean true if true userRoles should contain all of actionRoles. else atleast one Returns: if user roles comply to action roles Type boolean createSpecial(owner, system) Creates array of special roles Parameters: Name Type Description owner boolean if actor is owner of document system boolean if actor is a system process Returns: list of special roles Type Array.&lt;string&gt; extractAuthData() Collects various authentification and authorization data from request object Returns: various authentification data for actor { root:boolean, auth: boolean, role: [string], uid: ObjectId, sid: string, ip:string } Type object extractSafeFields(schema, action, data, roles, actorId, system) Using schema and information about action and actor to extract only safe information forming new object with data only from safe fields Parameters: Name Type Default Description schema Object mongoose model schema with extended fields from not-* action string action to check against data Object source of data to extract from roles Array.&lt;string&gt; actor roles actorId string | ObjectId actor objectId system boolean false true if actor is a system procedure Returns: object containing only data from safe fields Type Object fieldIsSafe(field, action, roles, special) Check if field of target object is safe to access by actor with defined roles in specific action Parameters: Name Type Description field Object description of field from schema action string action to check against roles Array.&lt;string&gt; actor roles special string special relations of actor and target (@owner, @system) Returns: true - safe Type boolean getIP(req) Get request ip Parameters: Name Type Description req object Express Request getOwnerId(data) Get data owner ObjectId Parameters: Name Type Description data Object Document Object Returns: owner ObjectId or undefined if field is not found Type ObjectId | undefined getRole(req) Returns user role from request object Parameters: Name Type Description req object Express Request Returns: user role getSafeFieldsForRoleAction(schema, action, roles, owner, system) Scans schema checks every field access regulations for specific action of actor with roles. Returns list of fields that could be accessed safely. Parameters: Name Type Description schema Object mongoose model schema with extended fields from not-* action string action to check against roles Array.&lt;string&gt; actor roles owner boolean actor is an owner of document system boolean actor is a system procedure Returns: list of accessible fields Type Array.&lt;string&gt; getSessionId(req) Get session id for active session Parameters: Name Type Description req object Express Request getUserId(req) Get user id for active session Parameters: Name Type Description req object Express Request ifAdmin(req) Returns true if user is admin Parameters: Name Type Description req object Express Request object Returns: true - admin, false - not admin Type boolean initFields() list = [ 'title', //for standart only name ['titleNonStandart', {component: 'UITextforBlind'}] //arrays of [name, mutation] ['someID', {}, 'ID'], //copy of standart ID field under name as someID ] intersect_safe(a, b) Two arrays in - one intersection of two out Parameters: Name Type Description a array first array b array scecond array Returns: array consisted of elements presented in both input arrays Type array isOwner(data, user_id) Check if data is belongs to user Parameters: Name Type Description data Object object user_id ObjectId possible owner Returns: true - belongs, false - not belongs Type boolean isUser(req) Checks if user is authenticated, by searching req.session.user Parameters: Name Type Description req object Express Request object Returns: true - authenticated, false - guest Type boolean module:Model/Validator() Take array of validator (https://www.npmjs.com/package/validator) rules and create array of mongoose-validator (https://www.npmjs.com/package/mongoose-validator) rules then return it ruleIsWildcard(safeFor) Checks if safe field rule is some sort variant of wild card Parameters: Name Type Description safeFor string | Array.&lt;string&gt; safe field rule Returns: if it's wildcard Type boolean setAuth(req, id, role) Set auth data in session, user id and role Parameters: Name Type Description req object Express Request id string user id role string user role setGuest(req) Set auth data in session to Guest Parameters: Name Type Description req object Express Request setRole(req, role) Set user role for active session Parameters: Name Type Description req object Express Request role Array.&lt;string&gt; array of roles setUserId(req, _id) Set user id for active session Parameters: Name Type Description req object Express Request _id string user id × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Modules Classes notApp notDomain notManifest notModule notRoute × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Classes Classes notApp notDomain notManifest notModule notRoute × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Auth.html":{"id":"module-Auth.html","title":"Module: Auth","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Auth × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Common.html":{"id":"module-Common.html","title":"Module: Common","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Common Methods &lt;static&gt; compareObjectIds(firstId, secondId) Validates and compares ObjectIds in string or Object form Parameters: Name Type Description firstId string | ObjectId first id secondId string | ObjectId second id Returns: true if equal Type booelean &lt;static&gt; firstLetterToLower(string) Change first letter case to lower Parameters: Name Type Description string string input string Returns: result Type string &lt;static&gt; firstLetterToUpper(string) Change first letter case to higher Parameters: Name Type Description string string input string Returns: result Type string &lt;static&gt; getTodayDate() Returns today Date object without hours, minutes, seconds Returns: current date with 00:00:00 Type Date &lt;static&gt; validateObjectId(id) Validates if string is a ObjectId Parameters: Name Type Description id string ObjectId string to validate Returns: true if check is not failed Type booelean × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Error.html":{"id":"module-Error.html","title":"Module: Error","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Error Methods &lt;static&gt; addError(errors, field, error) Пополняем объект ошибок Parameters: Name Type Description errors object errors field string name of the field error object error to add Returns: modified errors Type object × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Lib.html":{"id":"module-Lib.html","title":"Module: Lib","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Lib Methods &lt;static&gt; joinToFile(target, sources, splitter) Joins many files in one Parameters: Name Type Description target string result file path sources array list of source files splitter splitter file splitter × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Default.html":{"id":"module-Model_Default.html","title":"Module: Model/Default","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Default Methods &lt;static&gt; add(data) Starts add routine Parameters: Name Type Description data object data Returns: Promise Type Promise &lt;static&gt; countWithFilter(filter) Counts record method Parameters: Name Type Description filter object | array filter rules Returns: Promise Type Promise &lt;static&gt; getOne(id, population) Retrieves one record by primary key If versioning ON, it retrieves __latest and not __closed Parameters: Name Type Description id string primary key population Array optional if needed population of some fields Returns: Promise Type Promise &lt;static&gt; getOneByID(ID) Retrieves one record by unique numeric ID If versioning ON, it retrieves __latest and not __closed Parameters: Name Type Description ID number some unique numeric identificator Returns: Promise or NULL if increment is OFF Type Promise &lt;static&gt; getOneRaw(id) Retrieves one record by primary key, without any restriction Parameters: Name Type Description id string primary key Returns: Promise Type Promise &lt;static&gt; list(skip, size, sorter, filter) List record method Parameters: Name Type Description skip number number of skiped records size number length of return list sorter object sorter rules filter object | array filter rules Returns: Promise Type Promise &lt;static&gt; listAll() List all records from collection If Versioning is ON restricts to __latest and not __closed By default sorts by _id in DESC Returns: Promise Type Promise &lt;static&gt; listAllAndPopulate(populate) List all record in collection and populates If Versioning is ON restricts to __latest and not __closed By default sorts by _id in DESC Parameters: Name Type Description populate object | array populate rules Returns: Promise Type Promise &lt;static&gt; listAndCount(skip, size, sorter, filter, search, populate) List record in collection and populates, with count of total founded records By default sorts by _id in DESC Parameters: Name Type Description skip number number of skiped records size number length of return list sorter object sorter rules filter object | array filter rules search object | array search rules populate object populate rules Returns: {list, count, pages} Type Promise &lt;static&gt; listAndPopulate(skip, size, sorter, filter, populate) List record and populate method Parameters: Name Type Description skip number number of skiped records size number length of return list sorter object sorter rules filter object | array filter rules populate object populate rules Returns: Promise Type Promise &lt;static&gt; listByField(field, list, filter, populate) Returns list of items with specific values in specific field, optionaly filtered Parameters: Name Type Description field string name of the field to search in list array list of 'id' field values filter object | array filter rules populate object populate rules Returns: Promise Type Promise &lt;static&gt; makeQuery(method, filter) Common query with filtering constructor for generic method Parameters: Name Type Description method string name of the method filter object | array filtering rules object Returns: mongoose query object Type Query &lt;static&gt; sanitizeInput(input) Sanitize input Parameters: Name Type Description input object data Returns: data; Type object &lt;static&gt; update(filter, data, many) Starts update routine Parameters: Name Type Default Description filter object search criteria data object data many boolean false if true will affect all records according to filter Returns: Promise Type Promise &lt;inner&gt; close() Closes document and saves it This is replaces remove when Versioning is ON Returns: ID Type numeric &lt;inner&gt; getID() Returns incremental ID for this doc Returns: ID Type numeric × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Enrich.html":{"id":"module-Model_Enrich.html","title":"Module: Model/Enrich","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Enrich × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Increment.html":{"id":"module-Model_Increment.html","title":"Module: Model/Increment","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Increment × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Proto.html":{"id":"module-Model_Proto.html","title":"Module: Model/Proto","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Proto × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Routine.html":{"id":"module-Model_Routine.html","title":"Module: Model/Routine","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Routine × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Validator.html":{"id":"module-Model_Validator.html","title":"Module: Model/Validator","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Validator (require(\"Model/Validator\"))() Take array of validator (https://www.npmjs.com/package/validator) rules and create array of mongoose-validator (https://www.npmjs.com/package/mongoose-validator) rules then return it × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Model_Versioning.html":{"id":"module-Model_Versioning.html","title":"Module: Model/Versioning","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Model/Versioning × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Parser.html":{"id":"module-Parser.html","title":"Module: Parser","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Parser Methods &lt;static&gt; getRouteLine(url, modelName, actionName, actionData) Create routeLine for end-point Parameters: Name Type Description url string url in manifest format modelName string name of the model actionName string name of the action in the route file actionData object data from manifest for this action Returns: resolved router line Type string &lt;static&gt; parseLine(line, modelName, actionName) routeLine parser Parameters: Name Type Description line string raw route line like '/api/:modelName' or '/:record[_id]' modelName string is for name of the model routes collection actionName string is for name of the action in the routes collection record[fieldName] - is for client side mostly, shows what model field walue should be placed there. Samples ':record[_id]', ':record[authorId]' Returns: resolved line Type string × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Repos.html":{"id":"module-Repos.html","title":"Module: Repos","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Repos × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-Rollup.html":{"id":"module-Rollup.html","title":"Module: Rollup","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: Rollup × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"module-ShellHelpers.html":{"id":"module-ShellHelpers.html","title":"Module: ShellHelpers","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Module: ShellHelpers × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"notApp.html":{"id":"notApp.html","title":"Class: notApp","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Class: notApp notApp Application new notApp(options) Parameters: Name Type Description options object application options { mongoose: mongooseConnectionToDB modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } } Example Application creation routine let App = new notApp({ mongoose: mongooseLink modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } }) .importModuleFrom(__dirname+'/anotherModule', 'anotherCustomModuleName') //import module from path .importModulesFrom(__dirname+'/directoryOfUsefullessModules') .importModule(require('notModule'), 'notModule') .expose(ExpressApp); Methods expose(app) Exposes routes to ExpressJS application Parameters: Name Type Description app object ExpressJS application instance getManifest() Returns application manifest Returns: manifest Type object × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"notDomain.html":{"id":"notDomain.html","title":"Class: notDomain","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Class: notDomain notDomain Domain new notDomain(options) Parameters: Name Type Description options object application options { mongoose: mongooseConnectionToDB modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } } Example Domain creation routine let App = new new notDomain({ mongoose: mongooseLink modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } }) .importModuleFrom(__dirname+'/anotherModule', 'anotherCustomModuleName') //import module from path .importModulesFrom(__dirname+'/directoryOfUsefullessModules') .importModule(require('notModule'), 'notModule'); Members DEFAULT_INFORMER informer - messages DEFAULT_REPORTER reporter - errors logger logger Methods &lt;async&gt; execInModules(methodName) Execute method in modules Parameters: Name Type Description methodName string name of the method to execute fabricate() Execute fabricateModels methods on all registered modules Create mongoose models. forEachMod(func) Cycles throu all imported modules, passes name, module, and itself to argument function Parameters: Name Type Description func function function to perfom some action with module getEnv(key) Returns application environment variable Parameters: Name Type Description key string name of var Returns: value or undefined Type object | undefined getLogic(name) Returns logic Parameters: Name Type Description name string 'logicName' or 'moduleName//logicName' ('User', 'moduleName//User') Returns: logic Type object getLogicFile(logicName) Returns file with logic declarations Parameters: Name Type Description logicName string 'logicName' or 'moduleName//logicName' Returns: CommonJS module object Type object getModel(name) Returns model Parameters: Name Type Description name string 'modelName' or 'moduleName//modelName' ('User', 'moduleName//User') Returns: model Type object getModelFile(modelName) Returns file with model declarations Parameters: Name Type Description modelName string 'modelName' or 'moduleName//modelName' Returns: CommonJS module object Type object getModelMixins(modelNamespecified) Return mixins for model Parameters: Name Type Description modelNamespecified string by 'moduleName//modelName' or 'modelName' Returns: of mixins Type array getModelSchema(modelName) Returns specified by name or 'moduleName//modelName' model Schema Parameters: Name Type Description modelName string 'modelName' or 'moduleName//modelName' Returns: model schema Type object getModule(moduleName) Return module by specified module name Parameters: Name Type Description moduleName string 'moduleName' Returns: module Type object getRoute(name) Returns route Parameters: Name Type Description name string 'moduleName//routeName//functionName' ('not-user//user//add') Returns: route Type function importModule(mod, moduleName) Import module object. Chainable. Parameters: Name Type Description mod object notModule instance moduleName string name under witch module will be registered Returns: notDomain Type object importModuleFrom(modulePath, moduleName) Import single module from module dir. Chainable. Parameters: Name Type Description modulePath string path to module directory moduleName string name under witch module will be registered Returns: notDomain Type object importModulesFrom(modulesPath) Importing modules from directory. Chainable. Parameters: Name Type Description modulesPath string path to container directory Returns: notDomain Type object setEnv(key, val) Setting application environment variable Parameters: Name Type Description key string name of var val object value Returns: chainable Type notDomain × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"notManifest.html":{"id":"notManifest.html","title":"Class: notManifest","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Class: notManifest notManifest API manifest new notManifest(app, notApp, moduleName) Parameters: Name Type Description app object express application instance notApp object notApplication instance moduleName string name of owner module Methods clearActionFromRules(action, ruleSet) Clear action definition from rules of access Parameters: Name Type Default Description action object action data ruleSet object null specific set of rules for this action Returns: clean action data Type object clearFromDirtyFields(action) Deletes fields listed in DIRTY_FIELDS constant from object Parameters: Name Type Description action Object action object filterManifest(manifest, auth, role, root) Filters manifest for current user auth, role, root. Removes all actions that can not be performed Parameters: Name Type Description manifest object full raw manifest auth boolean user auth status role boolean user role status root boolean user root status Returns: filtered manifest Type object filterManifestRoute(route, auth, role, root) Clear route from action variants that not permited for user according to his auth, role, root status Parameters: Name Type Description route object route object auth boolean user auth status role boolean user role status root boolean user root status Returns: Return router with only actions user can access with current states of auth, role, root. With removed definitions of what rules of access are. Type object filterManifestRouteAction() registerRouteForAction(app, routesPath, routeLine, modelName, actionSetName, actionData) Создаем путь для одной конечной точки Parameters: Name Type Description app object express app object routesPath string directory where routes files is placed routeLine string aka '/login', '/user/:id', etc modelName string name of the mongoose model, should be exact as file name with routes for this model. If /models/theme.js contains 'Theme' mongoose model, then /routes/theme.js should ` contain routes for that model. actionSetName string name of action in routes file. Look for existing route file for understanding actionData object representation of action data Returns: if route were registered Type boolean registerRoutes(moduleManifest) Создаем пути согласно манифесту Parameters: Name Type Description moduleManifest object notManifest of module ruleSetHasFieldsDirective(ruleSet) Return true if ruleSet object has not empty list of fields Parameters: Name Type Description ruleSet Object specific set of rules for action Returns: if rule set has not empty fields list Type boolean × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"notModule.html":{"id":"notModule.html","title":"Class: notModule","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Class: notModule notModule Module representation new notModule(options) Parameters: Name Type Description options object options × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "},"notRoute.html":{"id":"notRoute.html","title":"Class: notRoute","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global checkAdmincheckCredentialscheckRoleBuildercheckSupremacycheckUsercleansecompareRolescreateSpecialEventEmitterextractAuthDataextractSafeFieldsfieldIsSafegetIPgetOwnerIdgetRolegetSafeFieldsForRoleActiongetSessionIdgetUserIdifAdmininitFieldsintersect_safeisOwnerisUserruleIsWildcardsetAuthsetGuestsetRolesetUserId Class: notRoute notRoute Route representation new notRoute(notApp, moduleName, routeName, actionName, actionData) Parameters: Name Type Description notApp object notApplication instance moduleName string name of owner module routeName string route name actionName string action name actionData object action data Methods exec(req, res, callback) Executes route action if such exist Parameters: Name Type Description req object Express Request Object res object Express Response Object callback function Returns: result of execution or HttpError Type object selectRule(req) Select rule from available or return null Parameters: Name Type Description req object Express Request Object Returns: rule or null Type object × Search results Close Documentation generated by JSDoc 3.6.7 on 2021-10-26T21:09:57+03:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
