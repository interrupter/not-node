<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Global Members &lt;constant&gt; notModule Not an App, But can be used for hosting modules and models. Methods module:Model/Validator() Take array of validator (https://www.npmjs.com/package/validator) rules and create array of mongoose-validator (https://www.npmjs.com/package/mongoose-validator) rules then return it × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Modules Classes notApp notDomain notManifest notModule notRoute × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Classes Classes notApp notDomain notManifest notModule notRoute × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Auth.html":{"id":"module-Auth.html","title":"Module: Auth","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Auth Methods &lt;static&gt; checkAdmin(req, res, next) Checks if user is authenticated, by searching req.session.user If auth pass next, else throw error Parameters: Name Type Description req object Express Request object res object Express Repost object next function callback &lt;static&gt; checkCredentials(rule, auth, role, admin) Check rule against presented credentials Parameters: Name Type Description rule object action rule { auth - if user should be authenticated role - if user shoud have some role admin - if user should be super user } auth Boolean user state of auth role String | Array user state of role admin Boolean user state of admin Returns: pass or not Type boolean &lt;static&gt; checkRoleBuilder(role) Returns Express middleware witch check role against one presented in request Parameters: Name Type Description role string | array action roles Returns: express middleware Type function &lt;static&gt; checkUser(req, res, next) Checks if user is authenticated, by searching req.session.user If auth pass next, else throw error Parameters: Name Type Description req object Express Request object res object Express Repost object next function callback &lt;static&gt; cleanse(req) Reset session Parameters: Name Type Description req object Express Request &lt;static&gt; compareRoles(userRoles, actionRoles) Compares two list of roles Parameters: Name Type Description userRoles array | string roles of user actionRoles array | string roles of action Returns: if user roles comply to action roles Type boolean &lt;static&gt; getRole(req) Returns user role from request object Parameters: Name Type Description req object Express Request Returns: user role &lt;static&gt; ifAdmin(req) Returns true if user is admin Parameters: Name Type Description req object Express Request object Returns: true - admin, false - not admin Type boolean &lt;static&gt; ifUser(req) Checks if user is authenticated, by searching req.session.user Parameters: Name Type Description req object Express Request object Returns: true - authenticated, false - guest Type boolean &lt;static&gt; intersect_safe(a, b) Two arrays in - one intersection of two out Parameters: Name Type Description a array first array b array scecond array Returns: array consisted of elements presented in both input arrays Type array &lt;static&gt; setAuth(req, id, role) Set auth data in session, user id and role Parameters: Name Type Description req object Express Request id string user id role string user role &lt;static&gt; setGuest(req) Set auth data in session to Guest Parameters: Name Type Description req object Express Request &lt;static&gt; setId(req, _id) Set user id for active session Parameters: Name Type Description req object Express Request _id string user id &lt;static&gt; setRole(req, role) Set user role for active session Parameters: Name Type Description req object Express Request role string role name × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Common.html":{"id":"module-Common.html","title":"Module: Common","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Common Methods &lt;static&gt; firstLetterToLower(string) Change first letter case to lower Parameters: Name Type Description string string input string Returns: result Type string &lt;static&gt; firstLetterToUpper(string) Change first letter case to higher Parameters: Name Type Description string string input string Returns: result Type string &lt;static&gt; validateObjectId(id) Validates if string is a ObjectId Parameters: Name Type Description id string ObjectId string to validate Returns: true if check is not failed Type booelean × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Error.html":{"id":"module-Error.html","title":"Module: Error","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Error Methods &lt;static&gt; addError(errors, field, error) Пополняем объект ошибок Parameters: Name Type Description errors object errors field string name of the field error object error to add Returns: modified errors Type object × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Lib.html":{"id":"module-Lib.html","title":"Module: Lib","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Lib Methods &lt;static&gt; joinToFile(target, sources, splitter) Joins many files in one Parameters: Name Type Description target string result file path sources array list of source files splitter splitter file splitter × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Model_Default.html":{"id":"module-Model_Default.html","title":"Module: Model/Default","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Default Methods &lt;static&gt; add(data) Starts add routine Parameters: Name Type Description data object data Returns: Promise Type Promise &lt;static&gt; countWithFilter(filter) Counts record method Parameters: Name Type Description filter object | array filter rules Returns: Promise Type Promise &lt;static&gt; getOne(id) Retrieves one record by primary key If versioning ON, it retrieves __latest and not __closed Parameters: Name Type Description id string primary key Returns: Promise Type Promise &lt;static&gt; getOneByID(ID) Retrieves one record by unique numeric ID If versioning ON, it retrieves __latest and not __closed Parameters: Name Type Description ID number some unique numeric identificator Returns: Promise or NULL if increment is OFF Type Promise &lt;static&gt; getOneRaw(id) Retrieves one record by primary key, without any restriction Parameters: Name Type Description id string primary key Returns: Promise Type Promise &lt;static&gt; list(skip, size, sorter, filter) List record method Parameters: Name Type Description skip number number of skiped records size number length of return list sorter object sorter rules filter object | array filter rules Returns: Promise Type Promise &lt;static&gt; listAll() List all records from collection If Versioning is ON restricts to __latest and not __closed By default sorts by _id in DESC Returns: Promise Type Promise &lt;static&gt; listAllAndPopulate(populate) List all record in collection and populates If Versioning is ON restricts to __latest and not __closed By default sorts by _id in DESC Parameters: Name Type Description populate object | array populate rules Returns: Promise Type Promise &lt;static&gt; listAndPopulate(skip, size, sorter, filter, populate) List record and populate method Parameters: Name Type Description skip number number of skiped records size number length of return list sorter object sorter rules filter object | array filter rules populate object populate rules Returns: Promise Type Promise &lt;static&gt; makeQuery(method, filter) Common query with filtering constructor for generic method Parameters: Name Type Description method string name of the method filter object | array filtering rules object Returns: mongoose query object Type Query &lt;static&gt; sanitizeInput(input) Sanitize input Parameters: Name Type Description input object data Returns: data; Type object &lt;inner&gt; close() Closes document and saves it This is replaces remove when Versioning is ON Returns: ID Type numeric &lt;inner&gt; getID() Returns incremental ID for this doc Returns: ID Type numeric × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Model_Enrich.html":{"id":"module-Model_Enrich.html","title":"Module: Model/Enrich","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Enrich × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Model_Increment.html":{"id":"module-Model_Increment.html","title":"Module: Model/Increment","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Increment × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Model_Proto.html":{"id":"module-Model_Proto.html","title":"Module: Model/Proto","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Proto × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:03+04:00 using the DocStrap template. "},"module-Model_Routine.html":{"id":"module-Model_Routine.html","title":"Module: Model/Routine","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Routine × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-Model_Validator.html":{"id":"module-Model_Validator.html","title":"Module: Model/Validator","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Validator (require(&quot;Model/Validator&quot;))() Take array of validator (https://www.npmjs.com/package/validator) rules and create array of mongoose-validator (https://www.npmjs.com/package/mongoose-validator) rules then return it × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-Model_Versioning.html":{"id":"module-Model_Versioning.html","title":"Module: Model/Versioning","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Model/Versioning × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-Parser.html":{"id":"module-Parser.html","title":"Module: Parser","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Parser Methods &lt;static&gt; getRouteLine(url, modelName, actionName, actionData) Create routeLine for end-point Parameters: Name Type Description url string url in manifest format modelName string name of the model actionName string name of the action in the route file actionData object data from manifest for this action Returns: resolved router line Type string &lt;static&gt; parseLine(line, modelName, actionName) routeLine parser Parameters: Name Type Description line string raw route line like '/api/:modelName' or '/:record[_id]' modelName string is for name of the model routes collection actionName string is for name of the action in the routes collection record[fieldName] - is for client side mostly, shows what model field walue should be placed there. Samples ':record[_id]', ':record[authorId]' Returns: resolved line Type string × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-Repos.html":{"id":"module-Repos.html","title":"Module: Repos","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Repos × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-Rollup.html":{"id":"module-Rollup.html","title":"Module: Rollup","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: Rollup × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"module-ShellHelpers.html":{"id":"module-ShellHelpers.html","title":"Module: ShellHelpers","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Module: ShellHelpers × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"notApp.html":{"id":"notApp.html","title":"Class: notApp","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Class: notApp notApp Application new notApp(options) Parameters: Name Type Description options object application options { mongoose: mongooseConnectionToDB modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } } Example Application creation routine let App = new notApp({ mongoose: mongooseLink modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } }) .importModuleFrom(__dirname+'/anotherModule', 'anotherCustomModuleName') //import module from path .importModulesFrom(__dirname+'/directoryOfUsefullessModules') .importModule(require('notModule'), 'notModule') .expose(ExpressApp); Methods expose(app) Exposes routes to ExpressJS application Parameters: Name Type Description app object ExpressJS application instance getManifest() Returns application manifest Returns: manifest Type object × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"notDomain.html":{"id":"notDomain.html","title":"Class: notDomain","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Class: notDomain notDomain Domain new notDomain(options) Parameters: Name Type Description options object application options { mongoose: mongooseConnectionToDB modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } } Example Domain creation routine let App = new new notDomain({ mongoose: mongooseLink modulesCollectionPaths: [__dirname + '/modules'], //each path to folder with modules modulesPaths: [], //each path to module modules: { filestore: require('not-filestore') //each npm not-* module with custom overriden name as key } }) .importModuleFrom(__dirname+'/anotherModule', 'anotherCustomModuleName') //import module from path .importModulesFrom(__dirname+'/directoryOfUsefullessModules') .importModule(require('notModule'), 'notModule'); Methods execInModules(methodName) Execute method in modules Parameters: Name Type Description methodName string name of the method to execute fabricate() Execute fabricateModels methods on all registered modules Create mongoose models. getEnv(key) Returns application environment variable Parameters: Name Type Description key string name of var Returns: value or undefined Type object | undefined getModel(modelName) Returns model Parameters: Name Type Description modelName string 'modelName' or 'moduleName//modelName' ('User', 'moduleName//User') Returns: model Type object getModelFile(modelName) Returns file with model declarations Parameters: Name Type Description modelName string 'modelName' or 'moduleName//modelName' Returns: CommonJS module object Type object getModelMixins(modelNamespecified) Return mixins for model Parameters: Name Type Description modelNamespecified string by 'moduleName//modelName' or 'modelName' Returns: of mixins Type array getModelSchema(modelName) Returns specified by name or 'moduleName//modelName' model Schema Parameters: Name Type Description modelName string 'modelName' or 'moduleName//modelName' Returns: model schema Type object getModule(moduleName) Return module by specified module name Parameters: Name Type Description moduleName string 'moduleName' Returns: module Type object importModule(mod, moduleName) Import module object. Chainable. Parameters: Name Type Description mod object notModule instance moduleName string name under witch module will be registered Returns: notDomain Type object importModuleFrom(modulePath, moduleName) Import single module from module dir. Chainable. Parameters: Name Type Description modulePath string path to module directory moduleName string name under witch module will be registered Returns: notDomain Type object importModulesFrom(modulesPath) Importing modules from directory. Chainable. Parameters: Name Type Description modulesPath string path to container directory Returns: notDomain Type object setEnv(key, val) Setting application environment variable Parameters: Name Type Description key string name of var val object value Returns: chainable Type notDomain × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"notManifest.html":{"id":"notManifest.html","title":"Class: notManifest","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Class: notManifest notManifest API manifest new notManifest(app, notApp, moduleName) Parameters: Name Type Description app object express application instance notApp object notApplication instance moduleName string name of owner module Methods clearActionFromRules(action) Clear action definition from rules of access Parameters: Name Type Description action object action data Returns: clean action data Type object filterManifest(manifest, auth, role, admin) Filters manifest for current user auth, role, admin. Removes all actions that can not be performed Parameters: Name Type Description manifest object full raw manifest auth boolean user auth status role boolean user role status admin boolean user admin status Returns: filtered manifest Type object filterManifestRoute(route, auth, role, admin) Clear route from action variants that not permited for user according to his auth, role, admin status Parameters: Name Type Description route object route object auth boolean user auth status role boolean user role status admin boolean user admin status Returns: Return router with only actions user can access with current states of auth, role, admin. With removed definitions of what rules of access are. Type object registerRouteForAction(app, routesPath, routeLine, modelName, actionSetName, actionData) Создаем путь для одной конечной точки Parameters: Name Type Description app object express app object routesPath string directory where routes files is placed routeLine string aka '/login', '/user/:id', etc modelName string name of the mongoose model, should be exact as file name with routes for this model. If /models/theme.js contains 'Theme' mongoose model, then /routes/theme.js should ` contain routes for that model. actionSetName string name of action in routes file. Look for existing route file for understanding actionData object representation of action data Returns: if route were registered Type boolean registerRoutes(moduleManifest) Создаем пути согласно манифесту Parameters: Name Type Description moduleManifest object notManifest of module × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"global.html#notModule":{"id":"global.html#notModule","title":"Class: notModule","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Class: notModule notModule Module representation new notModule(options) Parameters: Name Type Description options object options × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "},"notRoute.html":{"id":"notRoute.html","title":"Class: notRoute","body":" Documentation Modules AuthCommonErrorLibModel/DefaultModel/EnrichModel/IncrementModel/ProtoModel/RoutineModel/ValidatorModel/VersioningParserReposRollupShellHelpers Classes notAppnotDomainnotManifestnotModulenotRoute Global Global Class: notRoute notRoute Route representation new notRoute(notApp, moduleName, routeName, actionName, actionData) Parameters: Name Type Description notApp object notApplication instance moduleName string name of owner module routeName string route name actionName string action name actionData object action data Methods exec(req, res, callback) Executes route action if such exist Parameters: Name Type Description req object Express Request Object res object Express Response Object callback function Returns: result of execution or HttpError Type object selectRule(req) Select rule from available or return null Parameters: Name Type Description req object Express Request Object Returns: rule or null Type object × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-07-18T22:30:04+04:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
